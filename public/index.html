<!DOCTYPE html>
<html lang="en" class="color-theme-orange">

<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ff8900">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap:">

    <meta name="description" content="Attender - Electronic Attendance System" />
    <meta property="og:title" content="EAS - Attender" />
    <meta property="og:description" content="Attender - Electronic Attendance System" />
    <meta property="og:image" content="img/fac.png" />
    <meta name="format-detection" content="telephone=no">

    <!-- Title -->
    <title>Attender - Electronic Attendance System</title>

    <!-- Framework7 css -->
    <link rel="stylesheet" href="/css/framework7-bundle.css">
    <link rel="stylesheet" href="/css/app.css">

    <!-- Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="/css/line-awesome/css/line-awesome.min.css">

    <!-- Style css -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Favicon -->
    <link rel="apple-touch-icon" href="img/fac.png">
    <link rel="icon" href="img/fac.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

</head>

<body>
    <style>
        #loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
        }
        
        #loader {
            display: block;
            position: relative;
            margin: 0 auto;
            top: 0;
            width: 75vh;
            height: 75vh;
            overflow: hidden;
            z-index: 999999;
        }
        
        #loader .image {
            /* padding: 15px; */
            position: absolute;
            top: 50%;
            left: 32%;
            -ms-transform: translateX(-50%) translateY(-50%);
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
        }
        
        #loader-wrapper .loader-section {
            position: fixed;
            top: 0;
            width: 51%;
            height: 100%;
            background: #ffffff;
            z-index: 1000;
            -webkit-transform: translateX(0);
            /* Chrome, Opera 15+, Safari 3.1+ */
            -ms-transform: translateX(0);
            /* IE 9 */
            transform: translateX(0);
            /* Firefox 16+, IE 10+, Opera */
        }
        
        #loader-wrapper .loader-section.section-left {
            left: 0;
        }
        
        #loader-wrapper .loader-section.section-right {
            right: 0;
        }
        /* Loaded */
        
        .loaded #loader-wrapper .loader-section.section-left {
            -webkit-transform: translateX(-100%);
            /* Chrome, Opera 15+, Safari 3.1+ */
            -ms-transform: translateX(-100%);
            /* IE 9 */
            transform: translateX(-100%);
            /* Firefox 16+, IE 10+, Opera */
            -webkit-transition: all 0.7s 0.3s cubic-bezier(0.645, 0.045, 0.355, 1.000);
            transition: all 0.7s 0.3s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        }
        
        .loaded #loader-wrapper .loader-section.section-right {
            -webkit-transform: translateX(100%);
            /* Chrome, Opera 15+, Safari 3.1+ */
            -ms-transform: translateX(100%);
            /* IE 9 */
            transform: translateX(100%);
            /* Firefox 16+, IE 10+, Opera */
            -webkit-transition: all 0.7s 0.3s cubic-bezier(0.645, 0.045, 0.355, 1.000);
            transition: all 0.7s 0.3s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        }
        
        .loaded #loader {
            opacity: 0;
            -webkit-transition: all 0.3s ease-out;
            transition: all 0.3s ease-out;
        }
        
        .loaded #loader-wrapper {
            visibility: hidden;
            -webkit-transform: translateY(-100%);
            /* Chrome, Opera 15+, Safari 3.1+ */
            -ms-transform: translateY(-100%);
            /* IE 9 */
            transform: translateY(-100%);
            /* Firefox 16+, IE 10+, Opera */
            -webkit-transition: all 0.3s 1s ease-out;
            transition: all 0.3s 1s ease-out;
        }
        /* JavaScript Turned Off */
        
        .no-js #loader-wrapper {
            display: none;
        }
        
        .no-js h1 {
            color: #222222;
        }
        
        #content {
            margin: 0 auto;
            padding-bottom: 50px;
            width: 80%;
            max-width: 978px;
        }
    </style>

    <!-- Demo content -->
    <div id="demo-content">


        <div id="loader-wrapper">
            <!-- preloader -->
            <div id="loader">
                <div class="image">
                    <style>
                        .circle,
                        .circle:before,
                        .circle:after {
                            border-radius: 50%;
                        }
                        
                        .circle {
                            color: #ff8900;
                            font-size: 11px;
                            text-indent: -99999em;
                            margin: 55px auto;
                            position: relative;
                            width: 10em;
                            height: 10em;
                            box-shadow: inset 0 0 0 1em;
                            -webkit-transform: translateZ(0);
                            -ms-transform: translateZ(0);
                            transform: translateZ(0);
                        }
                        
                        .circle:before,
                        .circle:after {
                            position: absolute;
                            content: '';
                        }
                        
                        .circle:before {
                            width: 5.2em;
                            height: 10.2em;
                            background: #ffffff;
                            border-radius: 10.2em 0 0 10.2em;
                            top: -0.1em;
                            left: -0.1em;
                            -webkit-transform-origin: 5.1em 5.1em;
                            transform-origin: 5.1em 5.1em;
                            -webkit-animation: load2 2s infinite ease 1.5s;
                            animation: load2 2s infinite ease 1.5s;
                        }
                        
                        .circle:after {
                            width: 5.2em;
                            height: 10.2em;
                            background: #ffffff;
                            border-radius: 0 10.2em 10.2em 0;
                            top: -0.1em;
                            left: 4.9em;
                            -webkit-transform-origin: 0.1em 5.1em;
                            transform-origin: 0.1em 5.1em;
                            -webkit-animation: load2 2s infinite ease;
                            animation: load2 2s infinite ease;
                        }
                        
                        @-webkit-keyframes load2 {
                            0% {
                                -webkit-transform: rotate(0deg);
                                transform: rotate(0deg);
                            }
                            100% {
                                -webkit-transform: rotate(360deg);
                                transform: rotate(360deg);
                            }
                        }
                        
                        @keyframes load2 {
                            0% {
                                -webkit-transform: rotate(0deg);
                                transform: rotate(0deg);
                            }
                            100% {
                                -webkit-transform: rotate(360deg);
                                transform: rotate(360deg);
                            }
                        }
                    </style>
                    <div class="circle">Loading...</div>
                </div>
            </div>
            <!-- preloader animation end -->
            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>
            <!-- preloader end -->
        </div>

        <div id="content">
            <div class="page">
                <div class="page-content content-area pt-0 bottom-sp100">
                    <div class="navbar navbar-style-1">
                        <div class="navbar-bg"></div>
                        <div class="navbar-inner sliding">

                            <div class="title" style="color: var(--f7-theme-color);">Fingerprint</div>
                        </div>
                    </div>
                    <div class="tabs">
                        <div id="tab-1" class="page-content tab tab-active">
                            <div class="block">
                                <center>

                                    <div class="color-theme" style="background-color: var(--f7-theme-color); border-radius: 50%; height:80px; width:80px;">

                                        <svg style="fill: white; padding: 8px;" xmlns="http://www.w3.org/2000/svg" class="ionicon s-ion-icon" viewBox="0 0 512 512"><title>Finger Print</title><path d="M390.42 75.28a10.45 10.45 0 01-5.32-1.44C340.72 50.08 302.35 40 256.35 40c-45.77 0-89.23 11.28-128.76 33.84C122 77 115.11 74.8 111.87 69a12.4 12.4 0 014.63-16.32A281.81 281.81 0 01256.35 16c49.23 0 92.23 11.28 139.39 36.48a12 12 0 014.85 16.08 11.3 11.3 0 01-10.17 6.72zm-330.79 126a11.73 11.73 0 01-6.7-2.16 12.26 12.26 0 01-2.78-16.8c22.89-33.6 52-60 86.69-78.48 72.58-38.84 165.51-39.12 238.32-.24 34.68 18.48 63.8 44.64 86.69 78a12.29 12.29 0 01-2.78 16.8 11.26 11.26 0 01-16.18-2.88c-20.8-30.24-47.15-54-78.36-70.56-66.34-35.28-151.18-35.28-217.29.24-31.44 16.8-57.79 40.8-78.59 71a10 10 0 01-9.02 5.08zM204.1 491a10.66 10.66 0 01-8.09-3.6C175.9 466.48 165 453 149.55 424c-16-29.52-24.27-65.52-24.27-104.16 0-71.28 58.71-129.36 130.84-129.36S387 248.56 387 319.84a11.56 11.56 0 11-23.11 0c0-58.08-48.32-105.36-107.72-105.36S148.4 261.76 148.4 319.84c0 34.56 7.39 66.48 21.49 92.4 14.8 27.6 25 39.36 42.77 58.08a12.67 12.67 0 010 17 12.44 12.44 0 01-8.56 3.68zm165.75-44.4c-27.51 0-51.78-7.2-71.66-21.36a129.1 129.1 0 01-55-105.36 11.57 11.57 0 1123.12 0 104.28 104.28 0 0044.84 85.44c16.41 11.52 35.6 17 58.72 17a147.41 147.41 0 0024-2.4c6.24-1.2 12.25 3.12 13.4 9.84a11.92 11.92 0 01-9.47 13.92 152.28 152.28 0 01-27.95 2.88zM323.38 496a13 13 0 01-3-.48c-36.76-10.56-60.8-24.72-86-50.4-32.37-33.36-50.16-77.76-50.16-125.28 0-38.88 31.9-70.56 71.19-70.56s71.2 31.68 71.2 70.56c0 25.68 21.5 46.56 48.08 46.56s48.08-20.88 48.08-46.56c0-90.48-75.13-163.92-167.59-163.92-65.65 0-125.75 37.92-152.79 96.72-9 19.44-13.64 42.24-13.64 67.2 0 18.72 1.61 48.24 15.48 86.64 2.32 6.24-.69 13.2-6.7 15.36a11.34 11.34 0 01-14.79-7 276.39 276.39 0 01-16.88-95c0-28.8 5.32-55 15.72-77.76 30.75-67 98.94-110.4 173.6-110.4 105.18 0 190.71 84.24 190.71 187.92 0 38.88-31.9 70.56-71.2 70.56s-71.2-31.68-71.2-70.56c.01-25.68-21.49-46.6-48.07-46.6s-48.08 20.88-48.08 46.56c0 41 15.26 79.44 43.23 108.24 22 22.56 43 35 75.59 44.4 6.24 1.68 9.71 8.4 8.09 14.64a11.39 11.39 0 01-10.87 9.16z"></path></svg>
                                    </div>

                                    <h5 class="custom-file-label text-primary">Attender - EAS</h5>
                                    <h5>Enter Roll No.</h5>
                                </center>
                                <div class="item-input-wrap" style=" background: #f8f8f8;
                           
                            padding: 15px 25px;
                            border-radius: 8px;
                            border: 1px solid;
                            border-color: #e9e9e9;
                            font-size: 16px;
                            color: #000000;
                            font-weight: 400;">
                                    <input type="text" id="alias" style="width:100%" placeholder="Enter Your College Roll No.">

                                </div>
                                <div class="padding">
                                    <center><a class="link" id="passwordless-signin" class="button button-fill button-large button">PRESENT</a></center>
                                </div>

                                <h5 class="custom-file-label text-primary">
                                    <p id="status"></p>
                                </h5>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')
    </script>
    <script>
        $(document).ready(function() {

            setTimeout(function() {
                $('body').addClass('loaded');
                $('h1').css('color', '#ffffff');
            }, 500);

        });
    </script>

    <script src="http://192.168.1.4:8000/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>

    <script src="https://cdn.passwordless.dev/dist/0.2.0/passwordless.iife.js" crossorigin="anonymous"></script>
    <script>
        const API_KEY = "parthchopra111:public:df0b984f997f4f09b2607bb88d1fc546"; // Replace this value with your API Key
        const BACKEND_URL = ""; // will use node/app.js as default, but if you can't run node, use the hosted demo: https://demo-backend.passwordless.dev

        // Print Status messages to UI.
        const status = document.getElementById("status");

        function Status(text) {
            const currentText = status.innerText;
            var newLine =
                "[" + new Date().toLocaleTimeString() + "]: " + text + "\n";
            status.innerText = newLine + currentText;
        }
        Status("Welcome! Please click on PRESENT.");

        if (API_KEY[0] === "<") {
            Status("WARNING: Please change the API_KEY in index.html and API_KEY_SECRET in app.js before running the example.")
        }
    </script>
    <script>
        async function RegisterPasswordless(e) {
            e.preventDefault();

            const alias = document.getElementById("alias").value;

            Status("Starting registering...");

            /**
             * Initiate the Passwordless client with your public api key
             */
            const p = new Passwordless.Client({
                apiKey: API_KEY
            });

            /**
             * Create token - Call your node backend to retrieve a token that we can use client-side to register a key to a alias
             */
            const backendRequest = await fetch(
                BACKEND_URL + "/create-token?alias=" + alias
            );
            const backendResponse = await backendRequest.text();
            if (!backendRequest.ok) {
                // If our demo backend did not respond with success, show error in UI
                Status(backendResponse);
                return;
            }

            /**
             *  Register a key - The Passwordless API and browser creates and stores a key, based on the token.
             */
            try {
                await p.register(backendResponse);

                Status("Attendence marked successfully. Click on MARKED and continue ur lecture.");

                /**
                 * Done - the user can now sign in using the key
                 */
            } catch (e) {
                console.error("Things went bad", e);
                Status("Things went bad, check console");
            }
        }

        document
            .getElementById("passwordless-register")
            .addEventListener("click", RegisterPasswordless);
    </script>

    <script>
        async function handleSignInSubmit(e) {
            e.preventDefault();
            const alias = document.getElementById("alias").value;

            Status("Starting sign in...");

            /**
             * Initiate the Passwordless client with your public api key
             */
            const p = new Passwordless.Client({
                apiKey: API_KEY,
            });

            try {
                /**
                 * Sign in - The Passwordless API and the browser initiates a sign in based on the alias
                 */

                //var userId = await fetch("user/passwordless-id").then(r => r.text()); // get user id from database

                const token = await p.signinWithAlias(alias);
                //const token = await p.signinWithId(486761564);

                console.log("Received token", token);
                /**
                 * Verify the sign in - Call your node backend to verify the token created from the sign in
                 */
                const user = await fetch(BACKEND_URL + "/verify-signin?token=" + token).then((r) =>
                    r.json()
                );

                /**
                 * Done - you can now check the user result for status, userid etc
                 */
                Status("User details: " + JSON.stringify(user, null, 2));
                Status("Yey! Succesfully - Attender! click on MARKED for confirmation!");

                console.log("User", user);
            } catch (e) {
                console.error("Things went really bad: ", e);
                Status("Things went bad, check console");
            }
        }
        document
            .getElementById("passwordless-signin")
            .addEventListener("click", handleSignInSubmit);
    </script>
    <script src="js/framework7-bundle.min.js"></script>
    <script src="js/store.js"></script>
    <script src="js/app.js"></script>
</body>

</html>